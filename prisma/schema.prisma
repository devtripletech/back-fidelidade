// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = "postgresql://postgres:Zdz4evcqzUbsp66GKNvXCqE4iSQRVXC30IJSkI5SugUHWcORH3O0dsW1h2j2Suii@5.161.100.160:5455/fidelidade"
}


model consulta_user {
  id_consulta_user  Int   @id @default(autoincrement())
  id_user Int
  data_cadastrou DateTime?
  id_dados_fisica Int
  @@map("consulta_user")
}


model consulta_saldo {
  id_consulta_sado  Int   @id @default(autoincrement())
  id_user Int
  data_cadastrou DateTime
  saldo Int
  saldo_contratado Int
  data_atualizou DateTime
  @@map("consulta_saldo")
}

model consulta_insere_log {
  id_consulta_insere  Int   @id @default(autoincrement())
  id_user Int
  data_cadastrou DateTime?
  debito Int 
  fonte_propria Int
  consulta String
  id_dados_fisica Int
  @@map("consulta_insere_log")

}

model dados_fisica {
  id             Int      @id @default(autoincrement())
  nome           String
  cpf            String
  tipo_end       String?  @db.VarChar(20)
  rua            String?
  numero         String?
  cidade         String?
  uf             String?  @db.Char(2)
  cep            String?
  morto          Boolean  @default(false)
  celular_ddd    Int?
  celular_number String?
  connect_whats  DateTime?
  rg             String?
  bairro         String?
  nome_mae       String?
  data_aniversaio DateTime?

  @@map("dados_fisica")
}

model crm_cliente{
        CODIGO_CLIENTE String @id
        CPF String
        DATA_VENDA DateTime
        TICKET String
        CODIGO_FILIAL String
        VALOR_PAGO Decimal
        VALOR_TIKET Decimal
        ULTIMA_COMPRA DateTime
        NOME_SOCIAL String
        CLIENTE_VAREJO String
        ANIVERSARIO DateTime
        EMAIL String
        DDD_CELULAR String
        CELULAR String
        DATA_CADASTROU String
  @@map("crm_cliente")
}


model status_pedido{
      id_status_pedido Int  @id @default(autoincrement())
      nome_status String
      id_empresa Int
      ativo Int
      data_cadastrou DateTime? @default(now())
  @@map("status_pedido")
}

model pedido{
      id_pedido Int  @id @default(autoincrement())
      id_user Int
      id_lista Int
      total Float
      data_cadastrou DateTime? @default(now())
  @@map("pedido")
}

model pedido_item{

      id_pedido_item Int  @id @default(autoincrement())
      id_pedido Int
      id_produto Int
      qtde Int
      valor_unit Float
      data_cadastrou DateTime? @default(now())
      
  @@map("pedido_item")
}


model lista_produto{

      id_lista_produto Int  @id @default(autoincrement())
      id_produto Int 
      id_lista Int
      id_empresa Int
      qtde_para_venda Int
      qtde_disponivel Int
      data_cadastrou DateTime? @default(now())
      
  @@map("lista_produto")
}

model campanha_token {

    id_campanha_token Int  @id @default(autoincrement())
    id_campanha Int
    token String
    utilizado Int
    gerado Int
    data_cadastrou DateTime? @default(now())

    @@map("campanha_token")
  
}


model userempresa{

      id_user_empresa Int  @id @default(autoincrement())
      id_empresa Int
      id_user Int 
      data_cadastrou DateTime? @default(now())
      role Int ? @default(1)

  @@map("userempresa")
}

model lista{
  
      id_lista Int  @id @default(autoincrement())
      id_empresa Int
      nome_lista String
      ativo Int?
      descricao String
      data_cadastrou DateTime? @default(now())
      data_vigencia_inicio DateTime?
      data_vigencia_fim DateTime?
      uid String?

  @@map("lista")
}

model categoria{

      id_categoria Int  @id @default(autoincrement())
      id_empresa Int
      nome_categoria String
      ativo Int 
      data_cadastrou DateTime? @default(now())
      data_update DateTime?
      icon String
      produtos produto[]
      

  @@map("categoria")
}

model produto{

      id_produto Int  @id @default(autoincrement())
      id_empresa Int
      id_categoria Int
      nome_produto String
      valor Float
      ativo Int 
      data_cadastrou DateTime? @default(now())
      descricao String
      categoria   categoria @relation(fields: [id_categoria], references: [id_categoria])

  @@map("produto")
}



model usuario{

      id_usuario Int  @id @default(autoincrement())
      id_user Int 
      cpf String
      nome String
      endereco String
      bairro String
      tipo String
      cidade String
      postalcode String
      celular String
      data_cadastrou DateTime? @default(now())
      ativo Int ? @default(1)
      numero String
      data_nascimento DateTime ?

  @@map("usuario")
}

model Campanha_msg{
      id_campanha_msg Int  @id @default(autoincrement())
      mensagem String
      nome String
      ativo Int ?
      data_cadastrou DateTime? @default(now())
      id_empresa Int
      id_user Int
  @@map("campanha_msg")
}


model User{

      id Int  @id @default(autoincrement())
      name String
      email String ?
      password String
      cpf  String ?
      role Int ?
      created_at DateTime? @default(now())
      update_at DateTime? @default(now())
      ativo Int @default(1)
      uid_user String ?

  @@map("users")
}

model Resgate{

      id_resgate Int  @id @default(autoincrement())
      id_campanha Int
      id_user Int 
      id_user_realizou Int
      data_cadastrou   DateTime? @default(now())
      qtde_resgatado Int

  @@map("resgate")
}




model empresa{

      id_empresa Int  @id @default(autoincrement())
      id_user Int 
      nome_empresa String
      cnpj String ?
      data_cadastrou DateTime? @default(now())
      ativo Int ? @default(1)
      uid String @default(dbgenerated()) @db.Uuid
      apikey String?

  @@map("empresa")
}



model campanha_formulario{

      id_campanha_formulario Int  @id @default(autoincrement())
      token String
      nome String 
      email String
      cpf String 
      celular String 
      data_cadastrou DateTime? @default(now())
  @@map("campanha_formulario")
}


model campanha{

      id_campanha Int  @id @default(autoincrement())
      id_empresa Int 
      nome_campanha String
      data_inicio DateTime ?
      data_fim DateTime ?
      ativo Int ? @default(1)
      qtde_servico Int
      descricao String ?
      id_user Int ?
      gera_token Int ?
      nro_campanha_cliente String ?
      qtde_token Int ?
      qtde_pontos Int ?
      id_campanha_msg Int ?
      mensagem_cliente String ?
      uid String @default(dbgenerated()) @db.Uuid
    
  @@map("campanha")
}


model carimbo{

      id_carimbo Int  @id @default(autoincrement())
      id_user_carimbou Int
      id_user Int 
      id_campanha Int
      data_carimbo DateTime? @default(now())
      qtde_carimbo Int?
      id_resgate Int?

  @@map("carimbo")
}



model Category{
  id String @id @default(uuid())
  name String
  created_at DateTime? @default(now())
  update_at DateTime? @default(now())

  @@map("categories")
  products Product []
}

model Product{
    id String @id @default(uuid())
    name String
    price String
    description String
    banner String
    created_at DateTime? @default(now())
    update_at DateTime? @default(now())

    category Category @relation(fields: [category_id], references: [id])
    @@map("products")

  category_id String
  items Item[]

}

model Order{
    id String @id @default(uuid())
    table Int
    status Boolean @default(false)
    draft Boolean @default(true)
    name String?
    created_at DateTime? @default(now())
    update_at DateTime? @default(now())

    @@map("orders")

    items Item []

}

model Item {
    id String @id @default(uuid())
    amount Int
    created_at DateTime? @default(now())
    update_at DateTime? @default(now())
    order Order @relation(fields: [order_id], references: [id])
    product Product @relation(fields: [product_id], references: [id])
    @@map("items")
    order_id String
    product_id String
}